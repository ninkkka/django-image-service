{% extends 'base.html' %}

{% block title %}Все изображения{% endblock %}

{% block content %}
<div class="gallery">
    <h2>Все изображения</h2>
    
    <div class="image-grid" id="image-grid">
    </div>
</div>

<script>
    fetch('/api/images/')
        .then(response => response.json())
        .then(data => {
            const grid = document.getElementById('image-grid');
            let html = '';

            const images = data.results || data;
            
            images.forEach(image => {
                html += `
                    <div class="image-card">
                        <img src="${image.thumbnail_url || image.image_url}" alt="${image.title}" loading="lazy">
                        <div class="image-info">
                            <h3>${image.title}</h3>
                            <p>Загружено: ${new Date(image.uploaded_at).toLocaleDateString()}</p>
                            <p>Размер: ${image.width}×${image.height}</p>
                            <a href="/image/${image.id}/" class="btn">Подробнее</a>
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        })
        .catch(error => {
            console.error('Ошибка:', error);
            document.getElementById('image-grid').innerHTML = '<p>Ошибка при загрузке изображений</p>';
        });
</script>

<style>
    .image-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px;
    }
    .image-card {
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .image-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }
    .image-info {
        padding: 15px;
    }
    .btn {
        display: inline-block;
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 4px;
    }
</style>
{% endblock %}